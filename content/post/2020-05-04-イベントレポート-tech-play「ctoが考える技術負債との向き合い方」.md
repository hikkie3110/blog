---
title: "[イベントレポート]TECH PLAY「CTOが考える技術負債との向き合い方」"
subtitle: TECH PLAYのイベント参加レポート
date: 2020-05-04T06:16:08.381Z
author: hikkie3110
tags:
  - event
---
# TECH PLAY

## メドピアさん

### 会社紹介
- 社長が現役の医者
- エンジニア文化　from 2012
- スピーディに技術選択
　　　メリットデメリットを考えてノリで選択


### 技術的負債とメドピアでの取り組み

### 技術負債ってなに？
モチベーションを下げるコード
- しようがよくわからない
- 最新じゃない、古い
- トレンドじゃない
想定外に障害が起きてしまうコード

想定外に工数がかかるコード
Fat
Dry


放置すると
生産性落ちる
障害起きやすい
経営陣との信頼関係悪化
モチベーション下がる
やめる



#### モチベーションをあげる環境を作るには
- 独自フレームワーク
- テストを書く（後世に安心を与える） RSpec
- 定期的なバージョンアップ


#### 障害が起きにくいコードを作る環境
テストを書く！
皆で勉強する
　→　輪読会がオススメ(leaderが知見を共有する)
レビューする！
可読性をよくする

#### 開発にがぐんぐん進む環境
- レールに乗る
- 整地部活動をする
　　荒地ページを作ってリファクタリングしたいところを技術
- 皆でプルリクを振り返る。
- インフラstudy
- security study
　勉強用リポジトリ作成
  脆弱性を潰すとsuccessになる。
  　

## とっつきやすい
整地部
輪読会
プルリク振り返り会
プルリクテンプレート
レビュー
コーディング規約自動チェック

## 取り組み
エンジニア文化の醸成
技術負債の解消チームを作る
技術顧問の力を借りる
技術研鑽系イベントの定期開催
技術研鑽系おサポート



見る人が変わると技術的負債に早変わりする。
やれるところからやっていく姿勢が大事


## SanSan 藤倉さん
* 500名の社員
* そのうちエンジニアが150-160名
* Sansanが120/Eightが40名

## サービス事業に置ける技術負債

時間の経過と共に、今の最新コードも古くなる。



- 開発チームの能力
　開発初期チームの能力に夜もの。スキルレベルや人数など
- 現在の時間を手に入れる
　新しい事業が成功する確証がないという前提において、現在の開発を最小限の工数で収めるために開発的な負債をする。
- 時間経過による負債化
　常に進歩するため、時間の経過と共に夫妻になる。
　オンプレミスに最適化された設計や言語の古いバージョンでよく使われた書き方など

　
sansanだって最初はオンプレミス
今は90%aws/10%がazure

スピードが大事な時は技術的夫妻に目を瞑る。


## 返済計画によくある失敗
エンジニアによる開発は投資行為であり、そのリターンには定量的、ないしは客観的事実に基づく目的や結果測定をしたい。

現在のベストプラクティスによる改善をしたとしても、それ自体が数年後の夫妻になることも注意したい。
設計や実装技術は常に進化する。現在の負債

## どう返済するか？

（立ち上げ期）
前提となるリソースを確保する。
→　採用頑張るしかない。
エンジニアが採用に貢献する文化を作る。
リファラル採用や採用イベントへの貢献など

（成長期）
機能要件ではなく、非機能要件を満たすための返済プロジェクト

（拡大期）
開発工数の一定量を改善活動に使う。
開発チームが大きくなり、実績が積み上がってきたタイミングで導入するのが効果的
既存メンバの自律性を高めることを目的とした自らによる改善活動とすることで、社内engagement向上を図る。
離職率の低下や外部露出による技術ブランドの向上など、組織的改善を目的にすると良い。

この取り組みは事業貢献に対して目的が間接的になるため、導入には工夫が必要


### 経営判断による大規模リアーキテクチャ

事業の成長を目的とした技術的負債の返済を計画する


頻度は数年に一度程度



# Q&A
## 技術返済のストーリーをどうやって関係各所に説明していますか？
* SanSan
  * 事業の成長に引っ掛けて必ず説明する。
  * それで説明つかないものはやるべきではない。
* メドピア
  * エンジニアのモチベ？

Q.
会社は売り上げをあげる方向に注力している状況
　--- エンジニアの自己満足ならやらない方が良い。
どう経営に説明すべきか悩んでいる

A.
過去のコードを貶すことは許さない。
それがプロダクトの礎だから。
敬った状態でそれを綺麗にするにはどうするか？というストーリーが健全


Q2. 他の開発案件とのバランスをどう取りながら進めるべきか。
売上とか今後のレバレッジをすごく確認する。
　部長と福村さんとリードエンジニアで判断する。


Q3. 技術選定はどうやって行なっていますか？
* SanSan
  * 答えるのは難しい。知り合いに相談するとかは全くない。
  * いうてライブラリの選定くらい。現場が勝手にやっている1mmも関与していない。
  * 新プロダクトの開発は関与する。
  * いろんなパラメータがある。
    * 技術として今後伸びて行く可能性があるか。感覚で判断する。
    * このフレームワーク使えば採用うまく行くかも？
    * aws/gcp/azureはなくならないと思ったから使う。社内に選択肢として残しておきたい意図がある。

* メドピア
  * 技術選定のメソッドは特にない。
  *  知り合いに相談はしないが、メンバにすごく相談する。
　メンバにはイベントにいっぱい行ってもらってる。
　aws summitの内容など新技術のキャッチアップは自分ではやりきれない。メンバにキャッチアップしてもらう。
　そのOUTPUTで新技術を把握するようにしている。
  * ただ、それが廃れるかどうかはすごく気にしている。



### 〜エンジニア文化を作る〜
* 藤倉さんは作ったつもりもないし、作ろうとしたこともない。
* 経営陣向けにロジカルに説明しろ、としか言ってない。
* 事業会社であれば事業を伸ばすことが最優先
* それでメンタルが崩れるって事は単なるミスマッチ


### 技術負債の良い積み上げ方
* ドキュメントに残す事は好きじゃない
* ソースコードで綺麗に残せ。
* アーキテクチャレベルのドキュメントは絶対残す。
